<head>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="VzLXTJGPSyTLX6d96AxgkKvE/LRb7ECGyTxuwtpjHnVWVZs2gp5RDjeM/tgBnVdM"
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="9+9VLV50ZIoYm6ndV2JzOw1i6jKzJ5uuIbRvL9afckY="
    crossorigin=""
  ></script>
  <script src="ruta/a/tu/archivo.js"></script>
</head>


<div class="body" style="padding-left: 75px; margin-top: 70px;">
  <h1 class="text-center titulo tituloFuente">Consultar Central Meteorológica</h1>
  <!-- Contenido de breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item" style="padding-left: 160px; font-size: 18px">
        <a href="/home">Home</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        Consultar Central Meteorológica
      </li>
    </ol>
  </nav>
  <div class="container mt-12">

<!-- ----------------------------Inicio de Paso a Paso-------------------------------------------- -->
<mat-vertical-stepper>
  <mat-step
    [label]="titulo1"
    [completed]="isStep1Completed"
    [ngClass]="{ collapse: isCollapsed1 }"
  >
    <ng-container contenido-paso-1>
      <div class="card-body" [ngClass]="{ collapse: isCollapsed2 }">
        <div class="row justify-content-center">
          <div class="col-5 cardFiltrado cardAnimate cardFlat">
            <div>
              <div class="row">
                <div class="col-md-2 image-container">
                  <span
                    ><img
                      style="width: 102%; height: 102"
                      src="../../../assets/filtrar_central.png"
                      class="image"
                      alt="..."
                    />
                    <div class="texto">
                      <h4
                        style="
                          text-align: center;
                          color: #63ddff;
                          font-size: 18px;
                        "
                      >
                        Filtrar Central
                      </h4>
                    </div></span
                  >
                </div>                 

                <div
                class="col-md-1 vertical-line"
                style="width: 20px"
              ></div>
              <div class="col-md-2 margenFiltros">
                <div
                  class="form-outline input-group"
                  data-toggle="tooltip"
                  data-placement="top"
                  title="Buscar por Código de Central"
                >
                  <label class="search-field">
                    <mat-label
                      class="search-field label ng-tns-c97-48 ng-star-inserted"
                      >Código de Central</mat-label
                    >
                    <input
                      type="text"
                      class="form-control inputBusqueda .input-con-color-de-fondo"
                      placeholder="Ej. 1"
                      (keyup)="esFiltrar($event , 'codigo')"
                    />                             
                    <i
                      class="fas fa-search FormatoIconos"
                      style="padding-left: 20px"
                    ></i>
                  </label>
                </div>                          
              </div>
            </div>
          </div>
        </div>
      </div>
      <br />
      <br />
      
      <div class="row">
        <div class="col-12 cardFiltrado cardAnimate cardFlat">
          <!-- app.component.html -->
          <div class="table" *ngIf="dataSourceCentral">
            <table mat-table [dataSource]="dataSourceCentral" matSort #matSortCentral="matSort">

              <!-- Columnas -->
              <ng-container matColumnDef="cenNro">                                                            
                <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header>Cod.</th>
                <td class="table-row first-column" style="vertical-align: middle; text-align: textIzquierda"  mat-cell *matCellDef="let element">{{ element.cenNro }}</td>
              </ng-container>
      
              <ng-container matColumnDef="cenImei">
                <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header>IMEI</th>
                <td class="table-row" style="vertical-align: middle; text-align: textIzquierda" mat-cell *matCellDef="let element">{{ element.cenImei }}</td>
              </ng-container>
      
              <ng-container matColumnDef="cenCoorX">
                <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header>Coordenada X</th>
                <td class="table-row" style="vertical-align: middle; text-align: textIzquierda" mat-cell *matCellDef="let element">{{ element.cenCoorX }}</td>
              </ng-container>
      
              <ng-container matColumnDef="cenCoorY">
                <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header>Coordenada Y</th>
                <td class="table-row" style="vertical-align: middle; text-align: textIzquierda" mat-cell *matCellDef="let element">{{ element.cenCoorY }}</td>
              </ng-container>
      
              <ng-container matColumnDef="estDescripcion">
                <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header>Estado Central</th>
                <td class="table-row" style="vertical-align: middle; text-align: textIzquierda" mat-cell *matCellDef="let element">{{ element.estDescripcion }}</td>
              </ng-container>
      
              <!-- Columna vacia -->
              <ng-container matColumnDef="columnaVacia">
                <th class="encabezado text-center" mat-header-cell *matHeaderCellDef></th>
                <td class="table-row" class="align-center" mat-cell *matCellDef="let element"></td>
              </ng-container>
      
              <!-- Columna de acciones -->
              <ng-container matColumnDef="seleccionar">
                <th class="encabezado text-center" mat-header-cell *matHeaderCellDef>Seleccionar</th>
                <td class="table-row" class="align-center" mat-cell *matCellDef="let element">
                  <button
                    mat-button
                    (click)="seleccionarCentral(element)"
                    type="button"
                    class="btn"
                    data-bs-target="#staticBackdrop"
                    title="Seleccionar Central"
                  >
                    <img
                      src="../../../assets/seleccionar_central.png"
                      class="iconosBoton"
                      alt="..."
                    />
                  </button>
                </td>
              </ng-container>
      
              <!-- Filas -->
              <tr mat-header-row *matHeaderRowDef="displayedColumnsCentral"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumnsCentral; 
                let i = index" [ngClass]="{ 'fila-par': i % 2 === 0, 'fila-impar': i % 2 !== 0 }">
              </tr>      
            </table>
      
            <!-- Paginador -->
            <mat-paginator *ngIf="dataSourceCentral"
              [length]="dataSourceCentral.data.length"
              [pageSize]="pageSizeCentral"
              [pageSizeOptions]="[5, 10, 25, 100]"
              (page)="handlePageChangeCentral($event)"
              showFirstLastButtons
              #paginatorCentral
            ></mat-paginator>
      
            <div class="align-center" *ngIf="validarFiltrado() == true">
            </div>
      
            <div class="alert alert-primary text-center" role="alert" *ngIf="validarFiltrado() == false">
              No se encontraron centrales que coincidan con su búsqueda.
            </div>
      
          </div>
        </div>
      </div>
              
      </div>
    </ng-container>
  </mat-step>

  <mat-step
    [label]="titulo2"
    [completed]="isStep2Completed"
    [ngClass]="{ collapse: isCollapsed2 }"
    >
      <ng-container contenido-paso-2>    
        <!-- Botón ver otra central -->
        <div class="row">
          <div
            class="example-button-row"
            style="display: flex; justify-content: flex-end"
          >
            <button
              mat-fab
              extended
              color="primary"
              class="btonNuevaConsulta"
              (click)="goToPreviousStep()"
            >
              <mat-icon>touch_app</mat-icon>
              Nueva Consulta
            </button>
          </div>
        </div>

        <br>
        <br>
        
        <div class="card cardFiltrado cardAnimate cardFlat">
          <div class="card-header">
            <div class="d-flex justify-content-between align-items-center">
              <h4 class="mb-0 tituloCard">Ubicación de la Central N°: {{centralNroSeleccionada}} </h4>
              <img
                src="../../../assets/central_seleccionada.png"
                class="image"
                style="width: 5%; height: 5%; padding-right: 5px"
                alt="..."
              />
            </div>
          </div>

          <br>
          <div class="row">              
            <div class="col-12">
                <div id="map" style="height: 400px"></div>      
            </div>
         </div>
        </div>

        <br>

        <div class="card cardFiltrado cardAnimate cardFlat">
          <div class="card-header">
            <div class="d-flex justify-content-between align-items-center">
              <h4 class="mb-0 tituloCard">Lista de Servicios de la Central N° {{centralNroSeleccionada}} </h4>
              <img
                src="../../../assets/cold.png"
                class="image"
                style="width: 5%; height: 5%; padding-right: 5px"
                alt="..."
              />
            </div>
          </div>

          <br>
          <br>

          <div class="row justify-content-center">
            <div class="col-6 cardFiltrado cardAnimate cardFlat">
              <!-- app.component.html -->
              <div class="table" *ngIf="dataSourceServicio">
                  <table mat-table [dataSource]="dataSourceServicio" matSort #matSortServicio="matSort">

                  <!-- Columnas -->
                  <ng-container matColumnDef="serId">
                    <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header="serId">Cod.</th>
                    <td class="table-row first-column" style="vertical-align: middle; text-align: textIzquierda"  mat-cell *matCellDef="let element">{{ element.serId }}</td>
                  </ng-container>

                  <ng-container matColumnDef="serDescripcion">
                    <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header="serDescripcion">Servicio</th>
                    <td class="table-row" style="vertical-align: middle; text-align: textIzquierda" mat-cell *matCellDef="let element">{{ element.serDescripcion }}</td>
                  </ng-container>

                  <ng-container matColumnDef="serUnidad">
                    <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header="serUnidad">Unidad</th>
                    <td class="table-row" style="vertical-align: middle; text-align: textIzquierda" mat-cell *matCellDef="let element">{{ element.serUnidad }}</td>
                  </ng-container>

                  <ng-container matColumnDef="estDescripcion">
                    <th class="encabezado text-center" mat-header-cell *matHeaderCellDef mat-sort-header="estDescripcion">Estado</th>
                    <td class="table-row" style="vertical-align: middle; text-align: textIzquierda" mat-cell *matCellDef="let element">{{ element.estDescripcion }}</td>
                  </ng-container>                      
          
                  <!-- Filas -->
                  <tr mat-header-row *matHeaderRowDef="displayedColumnsServicio"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumnsServicio;
                    let i = index" [ngClass]="{ 'fila-par': i % 2 === 0, 'fila-impar': i % 2 !== 0 }">
                  </tr>
                  
                </table>
          
                <!-- Paginador -->
                <mat-paginator *ngIf="dataSourceServicio"
                  [length]="dataSourceServicio.data.length"
                  [pageSize]="pageSizeServicio"
                  [pageSizeOptions]="[5, 10, 25, 100]"
                  (page)="handlePageChangeServicio($event)"
                  showFirstLastButtons
                  #paginatorServicio 
                ></mat-paginator>
          
                <div class="align-center" *ngIf="validarFiltradoServiciosDeCentral() == true">
                </div>
          
                <div class="alert alert-primary text-center" role="alert" *ngIf="validarFiltradoServiciosDeCentral() == false">
                  No se encontraron servicios que coincidan con su búsqueda.
                </div>
          
              </div>
            </div>          
          </div>
          
          <br>

        </div>
      </ng-container>
  </mat-step>
    
</mat-vertical-stepper>
</div>  
<br />
</div>